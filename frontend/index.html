<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sphere Encoder Web - Pure WebGPU</title>
</head>

<body>
  <div class="container">
    <header class="header">
      <div class="title-group">
        <h1>Sphere Encoder</h1>
        <p>In-browser inference using Pure WebGPU</p>
      </div>
      <div class="selectors">
        <div class="selector-item">
          <label for="modelSelect">Model</label>
          <select id="modelSelect">
            <option value="ffhq_64">FFHQ (64x64)</option>
            <option value="cifar10" selected>CIFAR-10 (32x32)</option>
          </select>
        </div>
        <div class="selector-item">
          <label for="quantSelect">Quantization</label>
          <select id="quantSelect">
            <option value="f32">FP32 (Original)</option>
            <option value="f16">FP16 (Half)</option>
            <option value="q8" selected>INT8 (8-bit)</option>
            <option value="q4">INT4 (4-bit)</option>
          </select>
        </div>
      </div>
      <div class="status-container">
        <div id="throbber" class="throbber"></div>
        <div id="status">Loading models...</div>
      </div>
    </header>

    <div class="separator"></div>

    <section class="controls">
      <div class="control-row">
        <div class="button-group">
          <button id="sampleBtn" disabled>Random Generation</button>
        </div>

        <div class="toggle-group">
          <label><input type="checkbox" id="loopToggle"> Loop</label>
          <label><input type="checkbox" id="roamToggle"> Roam</label>
        </div>

        <div class="slider-group">
          <div class="slider-item">
            <span>Length</span>
            <input type="range" id="lengthSlider" min="0" max="2.5" step="0.001" value="0.5">
          </div>
          <div class="slider-item">
            <span>Speed</span>
            <input type="range" id="speedSlider" min="0" max="10.0" step="0.1" value="2.0">
          </div>
        </div>
      </div>

      <div class="canvas-group" style="margin-top: 1rem;">
        <div class="canvas-item">
          <div class="canvas-label">Random Reconstruction</div>
          <canvas id="randomCanvas" width="32" height="32"></canvas>
          <div id="randomTime" class="timing-label"></div>
        </div>
      </div>
    </section>

    <div class="separator"></div>

    <section class="image-section">
      <input type="file" id="fileInput" accept="image/*" style="display: none;">

      <main class="canvas-group">
        <div class="canvas-item">
          <div class="canvas-label">Samples</div>
          <div id="thumbnailGrid" class="thumbnail-grid"></div>
        </div>
        <div class="canvas-item" id="sourceUploadGroup">
          <div class="canvas-label">Source (Drag & Drop)</div>
          <canvas id="inputCanvas" width="32" height="32" class="interactive-canvas"></canvas>
          <div id="encTime" class="timing-label"></div>
        </div>
        <div class="canvas-item">
          <div class="canvas-label">Reconstruction</div>
          <canvas id="outputCanvas" width="32" height="32"></canvas>
          <div id="genTime" class="timing-label"></div>
        </div>
      </main>
    </section>


    <hr>

    <section class="interpolation-section">
      <div class="pad-outer">
        <div class="row">
          <div>
            <div class="corner-label">TL</div>
            <canvas id="corner-tl" width="32" height="32" class="corner-canvas"></canvas>
          </div>
          <div>
            <div class="corner-label">TR</div>
            <canvas id="corner-tr" width="32" height="32" class="corner-canvas"></canvas>
          </div>
        </div>

        <div id="interpPad" class="interp-pad">
          <div id="interpCursor" class="cursor"></div>
          <div class="grid"></div>
        </div>

        <div class="row">
          <div>
            <canvas id="corner-bl" width="32" height="32" class="corner-canvas"></canvas>
            <div class="corner-label">BL</div>
          </div>
          <div>
            <canvas id="corner-br" width="32" height="32" class="corner-canvas"></canvas>
            <div class="corner-label">BR</div>
          </div>
        </div>
      </div>

      <div class="result-group">
        <div class="label">Latent Interpolation Result</div>
        <canvas id="interpResult" width="32" height="32"></canvas>
        <button id="randomizeInterp" class="secondary">Randomize Corners</button>
      </div>
    </section>
  </div>
  <script type="module" src="/index.ts"></script>
</body>

</html>